{
  "actionType": "PROFILE_SEARCH",
  "platform": "INSTAGRAM",
  "version": "1.0.0",
  "description": "Extract profile information from Instagram profiles",
  "metadata": {
    "requiresAuth": true,
    "supportsPagination": false,
    "supportsRetry": true
  },
  "inputs": {
    "required": ["selectedListItems"],
    "optional": []
  },
  "outputs": {
    "success": ["profilesCount", "reachedIndex"],
    "failure": ["failedProfileSearches"]
  },
  "steps": [
    {
      "id": "navigate_to_profile",
      "type": "navigate",
      "url": "{{item.url}}",
      "waitFor": "page_load",
      "timeout": 30,
      "onError": {
        "action": "retry",
        "maxRetries": 3,
        "onFailure": "mark_failed"
      }
    },
    {
      "id": "close_popups",
      "type": "wait",
      "duration": 2.0,
      "waitFor": "time"
    },
    {
      "id": "extract_username",
      "type": "find_element",
      "xpath": "//h2[contains(@class, '_aacl')] | //span[contains(@class, '_aacl')]",
      "timeout": 10
    },
    {
      "id": "get_username_text",
      "type": "extract_text",
      "elementRef": "extract_username"
    },
    {
      "id": "extract_full_name",
      "type": "find_element",
      "configKey": "full_name",
      "timeout": 10
    },
    {
      "id": "get_full_name_text",
      "type": "extract_text",
      "elementRef": "extract_full_name"
    },
    {
      "id": "extract_profile_picture",
      "type": "find_element",
      "configKey": "profile_image",
      "timeout": 5
    },
    {
      "id": "get_profile_picture_url",
      "type": "extract_attribute",
      "elementRef": "extract_profile_picture",
      "attribute": "src"
    },
    {
      "id": "extract_post_count",
      "type": "find_element",
      "configKey": "post_count",
      "timeout": 5,
      "onError": {
        "action": "skip"
      }
    },
    {
      "id": "get_post_count_text",
      "type": "extract_text",
      "elementRef": "extract_post_count"
    },
    {
      "id": "extract_followers_count",
      "type": "find_element",
      "configKey": "followers_count",
      "timeout": 5
    },
    {
      "id": "get_followers_count_text",
      "type": "extract_text",
      "elementRef": "extract_followers_count"
    },
    {
      "id": "extract_following_count",
      "type": "find_element",
      "configKey": "following_count",
      "timeout": 5
    },
    {
      "id": "get_following_count_text",
      "type": "extract_text",
      "elementRef": "extract_following_count"
    },
    {
      "id": "extract_bio",
      "type": "find_element",
      "configKey": "bio",
      "timeout": 5,
      "onError": {
        "action": "skip"
      }
    },
    {
      "id": "get_bio_text",
      "type": "extract_text",
      "elementRef": "extract_bio"
    },
    {
      "id": "save_profile_data",
      "type": "save_data",
      "onSuccess": {
        "action": "update_progress",
        "increment": "reachedIndex"
      }
    }
  ],
  "loops": [
    {
      "id": "process_profiles",
      "iterator": "selectedListItems",
      "indexVar": "reachedIndex",
      "steps": [
        "navigate_to_profile",
        "close_popups",
        "extract_username",
        "get_username_text",
        "extract_full_name",
        "get_full_name_text",
        "extract_profile_picture",
        "get_profile_picture_url",
        "extract_post_count",
        "get_post_count_text",
        "extract_followers_count",
        "get_followers_count_text",
        "extract_following_count",
        "get_following_count_text",
        "extract_bio",
        "get_bio_text",
        "save_profile_data"
      ],
      "onComplete": "update_action_state"
    }
  ],
  "errorHandling": {
    "globalRetries": 3,
    "retryDelay": 2000,
    "onFinalFailure": "log_and_continue"
  }
}




